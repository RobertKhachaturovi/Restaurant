<!DOCTYPE html>
<html lang="ka">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Restaurant Menu</title>
    <link rel="stylesheet" href="./index.css" />
</head>

<body>
    <div class="overlay"></div>
    <button class="burger-menu-btn">
        <img src="https://cdn-icons-png.flaticon.com/512/2976/2976215.png" alt="menu" width="24" height="24">
    </button>
    <nav>
        <button class="close-btn">
            <i class="fas fa-times"></i>
        </button>
        <a href="../main/index.html" class="main-link">рЃЏрЃЌрЃљрЃЋрЃљрЃарЃў</a>
        <button onclick="getAll()">рЃДрЃЋрЃћрЃџрЃљ</button>
        <div class="categories-dropdown-wrapper">
            <button class="categories-dropdown-btn" type="button">
                <span>рЃЎрЃљрЃбрЃћрЃњрЃЮрЃарЃўрЃћрЃЉрЃў</span>
                <span class="categories-arrow">Рќ╝</span>
            </button>
            <div class="categories-dropdown" id="categoriesDropdown">
            </div>
        </div>
    </nav>
    <button id="filterToggleBtn" class="filter-toggle-btn">Рў░ рЃцрЃўрЃџрЃбрЃарЃў</button>
    <div id="filterPanel" class="filter-panel">
        <button id="closeFilterBtn" class="close-filter-btn">РюЋ</button>
        <h3>рЃцрЃўрЃџрЃбрЃарЃў</h3>
        <label><input type="checkbox" id="vegetarian" /> рЃЋрЃћрЃњрЃћрЃбрЃљрЃарЃўрЃљрЃюрЃБрЃџрЃў</label><br />
        <label><input type="checkbox" id="nuts" /> рЃерЃћрЃўрЃфрЃљрЃЋрЃА рЃЎрЃљрЃЎрЃљрЃџрЃА</label><br />
        <label>
            рЃАрЃўрЃЏрЃгрЃљрЃарЃћ:
            <select id="spiciness">
                <option value="">рЃюрЃћрЃЉрЃўрЃАрЃЏрЃўрЃћрЃарЃў</option>
                <option value="0">­ЪїХ№ИЈ 0</option>
                <option value="1">­ЪїХ№ИЈ 1</option>
                <option value="2">­ЪїХ№ИЈ 2</option>
                <option value="3">­ЪїХ№ИЈ 3</option>
                <option value="4">­ЪїХ№ИЈ 4</option>
            </select>
        </label><br />
        <button onclick="filter()">рЃњрЃљрЃцрЃўрЃџрЃбрЃарЃћ</button>
    </div>
    <section></section>
    <div id="cart">
        <a href="cart.html" id="cart-button">­ЪЏњ</a>
        <ul id="cart-items" class="hidden"></ul>
    </div>

    <div id="paymentModal" class="modal" style="display: none;">
        <div class="modal-content">
            <span id="closePaymentModal" class="close">&times;</span>
            <h2>рЃњрЃљрЃЊрЃљрЃ«рЃЊрЃљ</h2>

            <label for="cardNumber">рЃЉрЃљрЃарЃљрЃЌрЃўрЃА рЃюрЃЮрЃЏрЃћрЃарЃў:</label>
            <input type="tel" id="cardNumber" maxlength="19" placeholder="0000 0000 0000 0000" />


            <div class="row">
                <div class="column">
                    <label for="cardExpiry">рЃЋрЃљрЃЊрЃљ (MM/YY):</label>
                    <input type="text" id="cardExpiry" maxlength="4" placeholder="MM/YY" />
                </div>
                <div class="column">
                    <label for="cardCVC">CVC:</label>
                    <input type="tel" id="cardCVC" maxlength="3" placeholder="123" />
                </div>
            </div>

            <label for="cardHolder">рЃЉрЃљрЃарЃљрЃЌрЃўрЃА рЃЏрЃцрЃџрЃЮрЃЉрЃћрЃџрЃў:</label>
            <input type="text" id="cardHolder" maxlength="50" placeholder="рЃАрЃљрЃ«рЃћрЃџрЃў рЃњрЃЋрЃљрЃарЃў" />

            <button id="submitPaymentBtn">рЃњрЃљрЃЊрЃљрЃ«рЃЊрЃљ</button>
            <script>
                document.getElementById('submitPaymentBtn').addEventListener('click', function (e) {
                    e.preventDefault();

                    const cardNumberInput = document.getElementById('cardNumber');
                    const cardExpiryInput = document.getElementById('cardExpiry');
                    const cardCVCInput = document.getElementById('cardCVC');
                    const cardHolderInput = document.getElementById('cardHolder');


                    const cardNumber = cardNumberInput.value.replace(/\s/g, '').trim();
                    const cardExpiry = cardExpiryInput.value.trim();
                    const cardCVC = cardCVCInput.value.trim();
                    const cardHolder = cardHolderInput.value.trim();

                    const isCardNumberValid = /^\d{16}$/.test(cardNumber);
                    const isExpiryValid = /^(0[1-9]|1[0-2])\/([0-9]{2})$/.test(cardExpiry);
                    const isCVCValid = /^\d{3}$/.test(cardCVC);
                    const isHolderValid = cardHolder.length > 3;

                    function toggleInvalid(input, isValid) {
                        input.style.border = isValid ? '2px solid #ccc' : '2px solid red';
                    }

                    toggleInvalid(cardNumberInput, isCardNumberValid);
                    toggleInvalid(cardExpiryInput, isExpiryValid);
                    toggleInvalid(cardCVCInput, isCVCValid);
                    toggleInvalid(cardHolderInput, isHolderValid);

                    if (isCardNumberValid && isExpiryValid && isCVCValid && isHolderValid) {
                        window.location.href = './cart.html';
                    } else {
                        alert("рЃњрЃЌрЃ«рЃЮрЃЋ рЃерЃћрЃљрЃЋрЃАрЃЮ рЃДрЃЋрЃћрЃџрЃљ рЃЋрЃћрЃџрЃў рЃАрЃгрЃЮрЃарЃљрЃЊ.");
                    }
                });

                document.getElementById('cardNumber').addEventListener('input', function (e) {
                    let value = e.target.value.replace(/\D/g, '');
                    if (value.length > 16) value = value.slice(0, 16);
                    let formatted = value.match(/.{1,4}/g)?.join(' ') || '';
                    e.target.value = formatted;
                });


                document.getElementById('cardExpiry').addEventListener('input', function (e) {
                    let value = e.target.value.replace(/\D/g, '');
                    if (value.length > 4) value = value.slice(0, 4);
                    if (value.length >= 4) {
                        value = value.slice(0, 2) + '/' + value.slice(2);
                    }
                    e.target.value = value;
                });
            </script>

            <style>
                input {
                    border: 2px solid #ccc;
                    outline: none;
                    padding: 8px;
                    border-radius: 6px;
                    transition: border 0.3s;
                }

                input:focus {
                    border-color: #00b4d8;
                }
            </style>

        </div>
    </div>


    <script src="./index.js"></script>
</body>

</html>